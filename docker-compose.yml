# Clawdify â€” Docker Compose
#
# Usage:
#   1. Copy .env.example to .env and fill in your values
#   2. docker compose up -d
#
# Connecting to host's OpenClaw gateway:
#   The gateway runs on the host at localhost:18789. From inside Docker,
#   use "host.docker.internal" (Docker Desktop) or the host's IP address.
#
#   In your .env, set:
#     OPENCLAW_GATEWAY_URL=http://host.docker.internal:18789
#
#   On Linux without Docker Desktop, add "extra_hosts" (already included below)
#   and use http://host.docker.internal:18789

services:
  clawdify:
    build: .
    ports:
      - "${PORT:-3000}:3000"
    env_file:
      - .env
    volumes:
      # Persistent database storage
      - clawdify-data:/home/clawdify/.clawdify
      # Mount OpenClaw workspace for file browser (read-only)
      # Uncomment and adjust the path:
      # - ~/.openclaw/workspace:/openclaw/workspace:ro
    extra_hosts:
      # Allows containers to reach host services (gateway) via host.docker.internal
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

volumes:
  clawdify-data:
